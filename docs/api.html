<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Catalog API — Implementation Gallery</title>

<style>
:root{
  --black:#000;
  --yellow:#EFD900;
  --orange:#F76531;
  --purple:#AA6C7E;
  --blue:#4EA9D1;

  --fg: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.64);
  --line: rgba(255,255,255,.12);

  --max: 1160px;
  --h: 72px;

  --shadow-soft: 0 8px 22px rgba(0,0,0,.22);
  --ease: cubic-bezier(.2,.8,.2,1);
  --focus: 0 0 0 3px rgba(78,169,209,.35);

  --brand-grad: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: var(--black);
  color: var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Apple Color Emoji","Segoe UI Emoji";
  overflow-x:hidden;
}
a{ color:inherit; text-decoration:none; }
button, input{ font:inherit; }

.container{
  width:min(var(--max), calc(100% - 32px));
  margin:0 auto;
}

/* ===== Header ===== */
.header{
  position:sticky; top:0; z-index:50;
  height:var(--h);
  display:flex; align-items:center;
  background: linear-gradient(to bottom, rgba(0,0,0,.78), rgba(0,0,0,.35));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  transition: background .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
}
.header.is-scrolled{
  background: rgba(0,0,0,.84);
  box-shadow: var(--shadow-soft);
  border-bottom-color: rgba(255,255,255,.12);
}
.header-inner{
  width:min(var(--max), calc(100% - 32px));
  margin:0 auto;
  display:flex; align-items:center; justify-content:space-between;
  gap:14px;
}
.brand{ display:flex; align-items:center; gap:12px; min-width: 220px; }
.logo-img{ width:34px; height:34px; object-fit:contain; display:block; }
.brand-name{ display:flex; flex-direction:column; line-height:1.08; }
.brand-name strong{ font-weight:800; letter-spacing:.6px; }
.brand-name span{ font-size:12px; color: var(--muted); }

/* ===== Nav ===== */
.nav{
  position:relative;
  display:flex; align-items:center; gap:2px;
  padding:6px;
  border-radius:999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.25);
}
.nav a,
.nav-dd-btn{
  padding: 10px 12px;
  border-radius:999px;
  font-size:14px;
  color: rgba(255,255,255,.78);
  transition: background .18s var(--ease), color .18s var(--ease), transform .18s var(--ease);
  position:relative;
  outline:none;
  white-space:nowrap;
}
.nav a:hover,
.nav-dd-btn:hover{
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.96);
  transform: translateY(-1px);
}
.nav a:hover::after,
.nav-dd-btn:hover::after{
  content:"";
  position:absolute;
  left:16px; right:16px; bottom:6px;
  height:2px; border-radius:999px;
  background: var(--brand-grad);
  opacity:.95;
}
.nav a:focus-visible,
.nav-dd-btn:focus-visible{ box-shadow: var(--focus); }

.nav a[data-active="true"]{
  color: rgba(255,255,255,.95);
  background: rgba(255,255,255,.10);
}
.nav a[data-active="true"]::after{
  content:"";
  position:absolute;
  left:16px; right:16px; bottom:6px;
  height:2px; border-radius:999px;
  background: var(--brand-grad);
  opacity:.95;
}

/* ===== Dropdown ===== */
.nav-dd{ position:relative; display:inline-flex; align-items:center; }
.nav-dd-btn{
  appearance:none;
  border:0;
  background:transparent;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:10px;
}
.nav-dd[data-open="true"] .nav-dd-btn{
  color: rgba(255,255,255,.95);
  background:
    linear-gradient(rgba(255,255,255,.08), rgba(255,255,255,.08)) padding-box,
    var(--brand-grad) border-box;
  border: 1px solid transparent;
}
.nav-dd[data-active="true"] .nav-dd-btn::after{
  content:"";
  position:absolute;
  left:16px; right:16px; bottom:6px;
  height:2px; border-radius:999px;
  background: var(--brand-grad);
  opacity:.95;
}
.chev{
  width:10px; height:10px;
  display:inline-block;
  border-right:2px solid rgba(255,255,255,.55);
  border-bottom:2px solid rgba(255,255,255,.55);
  transform: rotate(45deg);
  transition: transform .18s var(--ease), opacity .18s var(--ease);
  opacity:.9;
}
.nav-dd[data-open="true"] .chev{ transform: rotate(225deg); }

.nav-menu{
  position:absolute;
  top: calc(100% + 10px);
  left: 0;
  min-width: 220px;
  padding: 8px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.72);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 14px 40px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.06) inset;
  display:none;
  z-index:80;
}
.nav-dd[data-open="true"] .nav-menu{ display:block; }

.nav-menu a{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding: 10px 10px;
  border-radius: 12px;
  color: rgba(255,255,255,.86);
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(255,255,255,.04);
  transition: transform .18s var(--ease), background .18s var(--ease), border-color .18s var(--ease), box-shadow .18s var(--ease);
  white-space:nowrap;
  position:relative;
}
.nav-menu a:hover{
  transform: translateY(-1px);
  background:
    linear-gradient(rgba(255,255,255,.06), rgba(255,255,255,.06)) padding-box,
    var(--brand-grad) border-box;
  border: 1px solid transparent;
  box-shadow: 0 8px 22px rgba(0,0,0,.35), 0 0 18px rgba(247,101,49,.18);
}
.nav-menu a[data-active="true"]{
  background:
    linear-gradient(rgba(255,255,255,.08), rgba(255,255,255,.08)) padding-box,
    var(--brand-grad) border-box;
  border: 1px solid transparent;
}
.nav-menu a[data-active="true"]::after{
  content:"";
  position:absolute;
  left:12px; right:12px; bottom:7px;
  height:2px; border-radius:999px;
  background: var(--brand-grad);
  opacity:.95;
}

@media (max-width: 760px){
  .nav{ flex-wrap:wrap; justify-content:center; }
  .nav-menu{ left: 50%; transform: translateX(-50%); }
}

/* ===== Page ===== */
.page{
  padding: 22px 0 56px;
  background:
    radial-gradient(900px 520px at 15% -10%, rgba(239,217,0,.10), transparent 60%),
    radial-gradient(860px 520px at 90% -20%, rgba(78,169,209,.08), transparent 55%),
    var(--black);
}

/* ===== Footer ===== */
.footer{
  position:relative;
  border-top: 1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(900px 420px at 15% 120%, rgba(239,217,0,.10), transparent 60%),
    radial-gradient(860px 420px at 85% 120%, rgba(78,169,209,.10), transparent 60%),
    linear-gradient(to top, rgba(255,255,255,.03), rgba(0,0,0,0) 45%),
    var(--black);
  overflow:hidden;
}

/* top accent line */
.footer::before{
  content:"";
  position:absolute;
  left:0; right:0; top:0;
  height:1px;
  background: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
  opacity:.9;
}

/* subtle noise-ish sheen */
.footer::after{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(900px 520px at 50% 130%, rgba(255,255,255,.05), transparent 60%);
  pointer-events:none;
  opacity:.6;
}

.footer-inner{
  position:relative;
  z-index:1;
  padding: 40px 0 22px;
}

.footer-top{
  display:grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 18px;
  align-items:start;
}

.footer-brand{
  display:flex;
  align-items:flex-start;
  gap:14px;
  text-align:left;
}

.footer-logo{
  width:34px;
  height:34px;
  object-fit:contain;
  flex:0 0 auto;
  opacity:.92;
}

.footer-brand h3{
  margin:0 0 4px 0;
  font-size:15px;
  font-weight:600;
  letter-spacing:.2px;
}

.footer-brand p{
  margin:0;
  font-size:13px;
  line-height:1.5;
  color:rgba(255,255,255,.65);
}

.footer-col h4{
  margin: 0 0 10px;
  font-size: 12px;
  letter-spacing:.35px;
  text-transform: uppercase;
  color: rgba(255,255,255,.78);
}

.footer-links{
  display:grid;
  grid-auto-flow: column;
  grid-template-rows: repeat(3, auto);
  gap: 8px 14px;
  align-content:start;
}

@media (max-width: 640px){
  .footer-links{
    grid-auto-flow: row;
    grid-template-rows: none;
  }
}

.footer-links a{
  color: rgba(255,255,255,.70);
  font-size: 13px;
  line-height:1.4;
  display:inline-flex;
  align-items:center;
  gap: 8px;
  width: fit-content;
  padding: 6px 8px;
  border-radius: 10px;
  transition: background .18s var(--ease), color .18s var(--ease), transform .18s var(--ease);
  outline:none;
}

.footer-links a:hover{
  color: rgba(255,255,255,.92);
  background: rgba(255,255,255,.06);
  transform: translateY(-1px);
}

.footer-links a:focus-visible{ box-shadow: var(--focus); }

.footer-links .hint{
  opacity:.75;
  font-size: 12px;
}

.footer-divider{
  margin: 22px 0 14px;
  height:1px;
  background: rgba(255,255,255,.10);
}

.footer-bottom{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  flex-wrap:wrap;
  color: rgba(255,255,255,.55);
  font-size: 12px;
}

.footer-badges{
  display:flex;
  align-items:center;
  gap: 8px;
  flex-wrap:wrap;
}

.footer-pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.70);
}

/* responsive */
@media (max-width: 980px){
  .footer-top{ grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px){
  .footer-inner{ padding: 34px 0 20px; }
  .footer-top{ grid-template-columns: 1fr; }
  .footer-bottom{ flex-direction:column; align-items:flex-start; }
}

/* ===== Inspector ===== *//* ===== Inspector ===== */
h1{ margin:0 0 10px; font-size:20px; }
.meta{ font-size:13px; opacity:.85; margin-bottom:14px; }

.grid{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:16px;
  align-items:start;
}

.card{
  border-radius:14px;
  border:1px solid transparent;
  background:
    linear-gradient(rgba(11,11,11,.92), rgba(11,11,11,.92)) padding-box,
    linear-gradient(120deg,var(--yellow),var(--orange),var(--purple),var(--blue)) border-box;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.06) inset,
    0 10px 30px rgba(0,0,0,.55),
    0 4px 12px rgba(247,101,49,.25);
  overflow:hidden;
}
.cardInner{
  padding:14px;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.playerWrap{
  border-radius:12px;
  overflow:hidden;
  border:1px solid var(--line);
  background:#000;
  line-height:0;
}
.playerWrap .video-js{ display:block; }

.pill{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  background:linear-gradient(135deg,#0072CE,#00AEEF,#6E3FF3);
}
.pill.dim{ opacity:.72; filter:saturate(.85); }

.log{
  height:300px;
  overflow:auto;
  background:#070707;
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  white-space:pre-wrap;
}
pre{
  background:#070707;
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px;
  overflow:auto;
}

#playerCard{ align-self:start; height:fit-content; }

/* Event category tags */
.logLine{ display:flex; gap:8px; align-items:flex-start; padding:2px 0; }
.tag{
  flex:0 0 auto;
  font-size:11px;
  font-weight:800;
  letter-spacing:.02em;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  user-select:none;
  white-space:nowrap;
}
.tag.play{ background: rgba(0,174,239,.18); border-color: rgba(0,174,239,.35); }
.tag.ad{
  background: linear-gradient(135deg, #EFD900, #F76531);
  border-color: rgba(247,101,49,.55);
  color:#000;
  box-shadow:0 0 6px rgba(247,101,49,.35);
}
.tag.error{ background: rgba(255,77,79,.18); border-color: rgba(255,77,79,.35); }
.tag.buffer{ background: rgba(170,108,126,.18); border-color: rgba(170,108,126,.35); }
.tag.info{ background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.14); }

.logMsg{
  font-size:12px;
  line-height:1.55;
  white-space:pre-wrap;
  word-break:break-word;
  opacity:.95;
}

/* ===== api.html original styles (kept) ===== */
    .card{
      position:relative;
      border-radius:14px;
      padding:1px; /* gradient border thickness */
      background: linear-gradient(120deg,var(--yellow),var(--orange),var(--purple),var(--blue));
      box-shadow:
        0 0 0 1px rgba(255,255,255,.06) inset,
        0 10px 30px rgba(0,0,0,.55),
        0 4px 12px rgba(247,101,49,.25);
      transition: transform .18s var(--ease), box-shadow .18s var(--ease);
    }

    .card > h2,
    .card > .body{
      background: rgba(11,11,11,.90);
    }

    .card > h2{
      margin:0;
      padding:12px 14px;
      border-radius:13px 13px 0 0;
      border-bottom:1px solid rgba(255,255,255,.08);
      font-size:14px;
      letter-spacing:.02em;
      opacity:.95;
    }

    .card > .body{
      padding:14px;
      border-radius:0 0 13px 13px;
      backdrop-filter: blur(6px);
    }

    .card:hover{
      box-shadow:
        0 0 0 1px rgba(255,255,255,.08) inset,
        0 12px 36px rgba(0,0,0,.65),
        0 0 18px rgba(247,101,49,.35);
      transform: translateY(-1px);
    }

    h1{ margin:0 0 12px; font-size:20px; letter-spacing:-.2px; }
    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    input{ background:#111; color:#fff; border:1px solid rgba(255,255,255,.18); border-radius:10px; padding:10px 12px; width: 320px; }
    button{ background:#fff; color:#000; border:0; border-radius:10px; padding:10px 12px; font-weight:600; cursor:pointer; }
    button:disabled{ opacity:.5; cursor:not-allowed; }
    pre{ margin:0; max-height:520px; overflow:auto; padding:12px; background:#070707; border-radius:12px; border:1px solid rgba(255,255,255,.10); }
    .meta{ font-size:12px; opacity:.8; margin-top:10px; line-height:1.5 }

    .pill{
      display:inline-flex;
      gap:6px;
      align-items:center;
      padding:4px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:600;
      letter-spacing:.02em;
      color:#fff;
      border:1px solid rgba(255,255,255,.18);
      background: linear-gradient(135deg, #0072CE 0%, #00AEEF 40%, #00C1D5 65%, #6E3FF3 100%);
      backdrop-filter: blur(4px);
      box-shadow:
        0 0 0 1px rgba(255,255,255,.10) inset,
        0 6px 18px rgba(0,174,239,.35),
        0 2px 6px rgba(0,0,0,.4);
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      input{ width:100%; }
    }
</style>
</head>

<body>
<header class="header" id="siteHeader">
    <div class="header-inner">
      <a class="brand" href="index.html">
        <img class="logo-img" src="https://solutions.brightcove.com/wmatsuo/Blogo.svg" alt="Brightcove Logo" />
        <div class="brand-name">
          <strong>BRIGHTCOVE</strong>
          <span>Onboarding Engagement Manager</span>
          <span>Implementation Gallery</span>
        </div>
      </a>
  
      <nav class="nav" aria-label="Primary">
        <a href="media.html" data-nav="media">Media</a>
        <a href="player.html" data-nav="player">Player</a>
      
        <!-- Catalog dropdown -->
        <div class="nav-dd" data-nav-group="catalog">
          <button class="nav-dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Catalog
            <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="nav-menu" role="menu" aria-label="Catalog menu">
            <a role="menuitem" href="api.html" data-nav="api">Catalog API</a>
            <a role="menuitem" href="playlist.html" data-nav="playlist">Playlist</a>
            <a role="menuitem" href="grid.html" data-nav="grid">Grid</a>
          </div>
        </div>
      
        <!-- Advertising dropdown -->
        <div class="nav-dd" data-nav-group="advertising">
          <button class="nav-dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Advertising
            <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="nav-menu" role="menu" aria-label="Advertising menu">
            <a role="menuitem" href="ad.html" data-nav="csai">CSAI</a>
            <a role="menuitem" href="ssai.html" data-nav="ssai">SSAI</a>
          </div>
        </div>
      
        <a href="ga.html" data-nav="ga">Google Analytics</a>
      </nav>
    </div>
  </header>

<main class="page">
  <div class="container">
    <h1 style="margin:0 0 12px;">Catalog API Response Viewer</h1>
  <div class="meta">
    Executes <span class="pill">player.catalog.getPlaylist()</span> from the player and displays the returned response in a formatted view on the page.
  </div>
<!-- =========================
     Catalog API Explanation
     Paste into existing page
========================== -->
<hr style="margin:16px 0; border:0; border-top:1px solid rgba(255,255,255,.10);" />

<h3 style="margin:14px 0 8px; font-size:13px; opacity:.9;">How this Catalog API call works</h3>

<div class="meta" style="margin-top:0;">
  This page calls <span class="pill">player.catalog.getPlaylist()</span> from the Brightcove Player.
  When you click <span class="pill">Run</span>, the player performs a <span class="pill">GET</span> request to the Brightcove Playback API,
  authenticating with a <span class="pill">Policy Key</span> (not OAuth2).
</div>

<div class="meta" style="margin-top:10px;">
  <span class="pill">What happens on Run</span>
  <ol style="margin:10px 0 0 18px; padding:0; line-height:1.7;">
    <li>You enter a Playlist ID.</li>
    <li>The player calls <code style="color:#fff;">player.catalog.getPlaylist(playlistId)</code>.</li>
    <li>The player sends an HTTP <strong>GET</strong> request with a <strong>Policy Key</strong>.</li>
    <li>The Playback API returns a JSON response (playlist + video data).</li>
    <li>This page formats and displays the JSON response.</li>
  </ol>
</div>

<div class="meta" style="margin-top:12px;">
  <span class="pill">Policy Key vs OAuth2</span>
  <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:10px;">
    <div class="card" style="border-radius:12px;">
      <h2 style="font-size:13px;">Player Catalog API (this demo)</h2>
      <div class="body">
        <ul style="margin:0; padding-left:18px; line-height:1.7;">
          <li>Auth: <strong>Policy Key</strong></li>
          <li>Runs in: <strong>Browser</strong> (client-side)</li>
          <li>Access: <strong>Read-only</strong></li>
          <li>Purpose: <strong>Playback retrieval</strong></li>
          <li>Safe to use in frontend</li>
        </ul>
      </div>
    </div>

    <div class="card" style="border-radius:12px;">
      <h2 style="font-size:13px;">Brightcove REST APIs (CMS, DI, etc.)</h2>
      <div class="body">
        <ul style="margin:0; padding-left:18px; line-height:1.7;">
          <li>Auth: <strong>OAuth2</strong> (access tokens)</li>
          <li>Runs in: <strong>Server</strong> (secure backend)</li>
          <li>Access: <strong>Manage content</strong> (create/update/delete)</li>
          <li>Purpose: <strong>Content management</strong></li>
          <li>Not safe to expose client secrets in frontend</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="meta" style="margin-top:12px;">
  <span class="pill">Under the hood</span>
  <div style="margin-top:10px;">
    Conceptually, the player performs a request like this:
  </div>
</div>

<pre style="margin-top:10px;">
GET https://edge.api.brightcove.com/playback/v1/accounts/{account_id}/playlists/{playlist_id}
Authorization: BCOV-Policy {policy_key}
</pre>

<div class="meta" style="margin-top:12px;">
  <span class="pill">Request flow</span>
</div>

<pre style="margin-top:10px;">
+--------------------+
|     Your Browser   |
|  (Demo Page)       |
+----------+---------+
           |
           | Click "Run"
           v
+--------------------+
| Brightcove Player  |
| player.catalog()   |
+----------+---------+
           |
           | GET request
           | (with Policy Key)
           v
+-------------------------------+
| Brightcove Playback API       |
| edge.api.brightcove.com       |
+----------+--------------------+
           |
           | JSON Response
           v
+--------------------+
|  Browser displays  |
|  response JSON     |
+--------------------+
</pre>

<div class="meta" style="margin-top:12px;">
  <span class="pill">Notes</span>
  <ul style="margin:10px 0 0; padding-left:18px; line-height:1.7;">
    <li><strong>getPlaylist()</strong> is a data retrieval call. It does not automatically load content into the player UI.</li>
    <li>The response is limited to content that is <strong>playback-allowed</strong> by the Policy Key (and any restrictions configured on it).</li>
    <li>Policy Keys are designed to be <strong>public + read-only</strong>, which is why they can be used safely in browser-based players.</li>
  </ul>
</div>
<!-- =========================
     /Catalog API Explanation
========================== -->

<div class="grid" style="margin-top:16px;">

  <div class="card">
    <h2>Player</h2>
    <div class="body">
      <video-js
        id="bcPlayer"
        data-account="6243204265001"
        data-player="3a0hM6r4H"
        data-embed="default"
        controls
        class="vjs-fluid vjs-16-9">
      </video-js>
      <div class="meta" id="playerStatus">Player: loading…</div>
    </div>
  </div>

  <div class="card">
    <h2>API Request / Response</h2>
    <div class="body">
      <div class="row">
        <input id="playlistId" value="1849995119852741477" />
        <button id="runBtn" disabled>Run</button>
        <span class="pill" id="resultPill">idle</span>
      </div>

      <div class="meta" id="summary"></div>

      <h3 style="margin:14px 0 8px; font-size:13px; opacity:.9;">Response JSON</h3>
      <pre id="jsonOut">{}</pre>
    </div>
  </div>

</div>



<script src="https://players.brightcove.net/6243204265001/3a0hM6r4H_default/index.min.js"></script>
<script>
window.addEventListener('load', () => {
  const statusEl = document.getElementById('playerStatus');
  const runBtn   = document.getElementById('runBtn');
  const pillEl   = document.getElementById('resultPill');
  const outEl    = document.getElementById('jsonOut');
  const sumEl    = document.getElementById('summary');
  const idEl     = document.getElementById('playlistId');

  const setPill = (t) => { if (pillEl) pillEl.textContent = t; };
  const pretty  = (o) => JSON.stringify(o, null, 2);

  // Brightcove Player runtime check
  if (typeof window.videojs !== 'function') {
    statusEl.textContent = 'Player: FAILED (videojs not found)';
    setPill('error');
    outEl.textContent = pretty({ error: true, message: 'videojs is not available. Check index.min.js load.' });
    return;
  }

  let player;
  try {
    // Brightcove推奨: getPlayer
    player = window.videojs.getPlayer('bcPlayer');
    if (!player) throw new Error('videojs.getPlayer("bcPlayer") returned null');
  } catch (e) {
    statusEl.textContent = 'Player: FAILED (init error)';
    setPill('error');
    outEl.textContent = pretty({ error: true, message: String(e) });
    return;
  }

  player.ready(() => {
    const hasCatalog     = !!player.catalog;
    const hasGetPlaylist = typeof player.catalog?.getPlaylist === 'function';
    const hasGetVideo    = typeof player.catalog?.getVideo === 'function';

    statusEl.textContent = `Player: ready | catalog:${hasCatalog} getPlaylist:${hasGetPlaylist} getVideo:${hasGetVideo}`;
    runBtn.disabled = false;
    setPill('ready');

    runBtn.addEventListener('click', () => {
      const playlistId = (idEl?.value || '').trim();
      if (!playlistId) return;

      runBtn.disabled = true;
      setPill('loading…');
      sumEl.textContent = '';
      outEl.textContent = '{}';

      if (!hasCatalog || !hasGetPlaylist) {
        runBtn.disabled = false;
        setPill('error');
        outEl.textContent = pretty({ error: true, message: 'player.catalog.getPlaylist is not available (Catalog plugin missing?)' });
        return;
      }

      player.catalog.getPlaylist(playlistId, (err, playlist) => {
        runBtn.disabled = false;

        if (err) {
          setPill('error');
          outEl.textContent = pretty({ error: true, message: String(err) });
          return;
        }

        // まず playlist 自体を表示
        setPill('ok');
        outEl.textContent = pretty(playlist);

        // 可能なら Video Object も1本だけ取得して「取れること」を示す（プレーヤーにはロードしない）
        const videos = Array.isArray(playlist?.videos) ? playlist.videos : [];
        const videoIds =
          Array.isArray(playlist?.video_ids) ? playlist.video_ids :
          Array.isArray(playlist?.videoIds) ? playlist.videoIds :
          [];

        // videos[0] があれば、それが Video Object
        if (videos.length && videos[0] && typeof videos[0] === 'object') {
          const v = videos[0];
          sumEl.innerHTML =
            '<div class="meta">' +
              `<span class="pill">Video Object: OK</span>` +
              (v.id ? `<span class="pill">id: ${v.id}</span>` : '') +
              (v.name ? `<span class="pill">name: ${v.name}</span>` : '') +
            '</div>';
          return;
        }

        // videos が無い/空の場合は video_ids から getVideo で1本取れるか試す
        if (videoIds.length && hasGetVideo) {
          const firstId = String(videoIds[0]);
          sumEl.innerHTML =
            '<div class="meta">' +
              `<span class="pill">Video Object: fetching…</span>` +
              `<span class="pill">id: ${firstId}</span>` +
            '</div>';

          player.catalog.getVideo(firstId, (e2, videoObj) => {
            if (e2) {
              setPill('ok (playlist only)');
              sumEl.innerHTML =
                '<div class="meta">' +
                  `<span class="pill">Video Object: NG</span>` +
                  `<span class="pill">reason: getVideo failed</span>` +
                '</div>';
              return;
            }

            // playlistレスポンス表示は維持しつつ、下に videoObj も出す
            setPill('ok');
            sumEl.innerHTML =
              '<div class="meta">' +
                `<span class="pill">Video Object: OK</span>` +
                (videoObj?.id ? `<span class="pill">id: ${videoObj.id}</span>` : '') +
                (videoObj?.name ? `<span class="pill">name: ${videoObj.name}</span>` : '') +
              '</div>';

            outEl.textContent = pretty({
              playlist,
              firstVideoObject: videoObj
            });
          });

          return;
        }

        // ここまでで Video Object を取れなかった場合
        setPill('ok (playlist only)');
        sumEl.innerHTML =
          '<div class="meta">' +
            `<span class="pill">Video Object: unavailable</span>` +
            `<span class="pill">note: playlist has no embedded videos and no usable video_ids</span>` +
          '</div>';
      });
    });
  });
});

</script>


    <footer class="footer" aria-label="Site footer">
  <div class="container footer-inner">
    <div class="footer-top">
      <div class="footer-brand">
        <img class="footer-logo" src="https://solutions.brightcove.com/wmatsuo/Blogo.svg" alt="" aria-hidden="true">
        <div>
          <h3>Onboarding Engagement Manager</h3>
          <p>
            A lightweight Brightcove onboarding/demo gallery—player patterns, catalog surfaces, and advertising inspectors.
          </p>
        </div>
      </div>

      <div class="footer-col">
        <h4>Explore</h4>
        <nav class="footer-links" aria-label="Footer navigation">
          <a href="index.html"><span aria-hidden="true">↗</span> Home</a>
          <a href="media.html"><span aria-hidden="true">↗</span> Media</a>
          <a href="playershow.html"><span aria-hidden="true">↗</span> Player showcase</a>
          <a href="api.html"><span aria-hidden="true">↗</span> Catalog API</a>
          <a href="playlist.html"><span aria-hidden="true">↗</span> Playlist</a>
          <a href="grid.html"><span aria-hidden="true">↗</span> Grid</a>
          <a href="ad.html"><span aria-hidden="true">↗</span> Advertising (CSAI)</a>
          <a href="ssai.html"><span aria-hidden="true">↗</span> Advertising (SSAI)</a>
          <a href="ga4_gallery.html"><span aria-hidden="true">↗</span> Google Analytics</a>
        </nav>
      </div>
    </div>

    <div class="footer-divider" role="separator"></div>

    <div class="footer-bottom">
      <div>© <span id="footerYear"></span> Brightcove • Waku Matsuo</div>

      <div class="footer-badges" aria-label="Badges">
        <span class="footer-pill">Docs-aligned</span>
        <span class="footer-pill">Implementation-first</span>
        <span class="footer-pill">Brightcove Player</span>
      </div>
    </div>
  </div>
</footer>
  </div>
</main>

<script src="https://players.brightcove.net/6243204265001/3a0hM6r4H_default/index.min.js"></script>

<script>
window.addEventListener('load', () => {
  const statusEl = document.getElementById('playerStatus');
  const runBtn   = document.getElementById('runBtn');
  const pillEl   = document.getElementById('resultPill');
  const outEl    = document.getElementById('jsonOut');
  const sumEl    = document.getElementById('summary');
  const idEl     = document.getElementById('playlistId');

  const setPill = (t) => { if (pillEl) pillEl.textContent = t; };
  const pretty  = (o) => JSON.stringify(o, null, 2);

  // Brightcove Player runtime check
  if (typeof window.videojs !== 'function') {
    statusEl.textContent = 'Player: FAILED (videojs not found)';
    setPill('error');
    outEl.textContent = pretty({ error: true, message: 'videojs is not available. Check index.min.js load.' });
    return;
  }

  let player;
  try {
    // Brightcove推奨: getPlayer
    player = window.videojs.getPlayer('bcPlayer');
    if (!player) throw new Error('videojs.getPlayer("bcPlayer") returned null');
  } catch (e) {
    statusEl.textContent = 'Player: FAILED (init error)';
    setPill('error');
    outEl.textContent = pretty({ error: true, message: String(e) });
    return;
  }

  player.ready(() => {
    const hasCatalog     = !!player.catalog;
    const hasGetPlaylist = typeof player.catalog?.getPlaylist === 'function';
    const hasGetVideo    = typeof player.catalog?.getVideo === 'function';

    statusEl.textContent = `Player: ready | catalog:${hasCatalog} getPlaylist:${hasGetPlaylist} getVideo:${hasGetVideo}`;
    runBtn.disabled = false;
    setPill('ready');

    runBtn.addEventListener('click', () => {
      const playlistId = (idEl?.value || '').trim();
      if (!playlistId) return;

      runBtn.disabled = true;
      setPill('loading…');
      sumEl.textContent = '';
      outEl.textContent = '{}';

      if (!hasCatalog || !hasGetPlaylist) {
        runBtn.disabled = false;
        setPill('error');
        outEl.textContent = pretty({ error: true, message: 'player.catalog.getPlaylist is not available (Catalog plugin missing?)' });
        return;
      }

      player.catalog.getPlaylist(playlistId, (err, playlist) => {
        runBtn.disabled = false;

        if (err) {
          setPill('error');
          outEl.textContent = pretty({ error: true, message: String(err) });
          return;
        }

        // まず playlist 自体を表示
        setPill('ok');
        outEl.textContent = pretty(playlist);

        // 可能なら Video Object も1本だけ取得して「取れること」を示す（プレーヤーにはロードしない）
        const videos = Array.isArray(playlist?.videos) ? playlist.videos : [];
        const videoIds =
          Array.isArray(playlist?.video_ids) ? playlist.video_ids :
          Array.isArray(playlist?.videoIds) ? playlist.videoIds :
          [];

        // videos[0] があれば、それが Video Object
        if (videos.length && videos[0] && typeof videos[0] === 'object') {
          const v = videos[0];
          sumEl.innerHTML =
            '<div class="meta">' +
              `<span class="pill">Video Object: OK</span>` +
              (v.id ? `<span class="pill">id: ${v.id}</span>` : '') +
              (v.name ? `<span class="pill">name: ${v.name}</span>` : '') +
            '</div>';
          return;
        }

        // videos が無い/空の場合は video_ids から getVideo で1本取れるか試す
        if (videoIds.length && hasGetVideo) {
          const firstId = String(videoIds[0]);
          sumEl.innerHTML =
            '<div class="meta">' +
              `<span class="pill">Video Object: fetching…</span>` +
              `<span class="pill">id: ${firstId}</span>` +
            '</div>';

          player.catalog.getVideo(firstId, (e2, videoObj) => {
            if (e2) {
              setPill('ok (playlist only)');
              sumEl.innerHTML =
                '<div class="meta">' +
                  `<span class="pill">Video Object: NG</span>` +
                  `<span class="pill">reason: getVideo failed</span>` +
                '</div>';
              return;
            }

            // playlistレスポンス表示は維持しつつ、下に videoObj も出す
            setPill('ok');
            sumEl.innerHTML =
              '<div class="meta">' +
                `<span class="pill">Video Object: OK</span>` +
                (videoObj?.id ? `<span class="pill">id: ${videoObj.id}</span>` : '') +
                (videoObj?.name ? `<span class="pill">name: ${videoObj.name}</span>` : '') +
              '</div>';

            outEl.textContent = pretty({
              playlist,
              firstVideoObject: videoObj
            });
          });

          return;
        }

        // ここまでで Video Object を取れなかった場合
        setPill('ok (playlist only)');
        sumEl.innerHTML =
          '<div class="meta">' +
            `<span class="pill">Video Object: unavailable</span>` +
            `<span class="pill">note: playlist has no embedded videos and no usable video_ids</span>` +
          '</div>';
      });
    });
  });
});

</script>

<script>
(() => {
  // Header elevation
  const header = document.getElementById('siteHeader');
  if (header) {
    const onScroll = () => header.classList.toggle('is-scrolled', window.scrollY > 6);
    onScroll();
    window.addEventListener('scroll', onScroll, { passive: true });
  }

  // Dropdown open/close
  const dds = Array.from(document.querySelectorAll('.nav-dd'));
  const closeAll = () => dds.forEach(dd => {
    dd.dataset.open = "false";
    const btn = dd.querySelector('.nav-dd-btn');
    if (btn) btn.setAttribute('aria-expanded', 'false');
  });
  const openOne = (dd) => {
    closeAll();
    dd.dataset.open = "true";
    const btn = dd.querySelector('.nav-dd-btn');
    if (btn) btn.setAttribute('aria-expanded', 'true');
  };

  dds.forEach(dd => {
    const btn = dd.querySelector('.nav-dd-btn');
    if (!btn) return;
    dd.dataset.open = "false";
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      (dd.dataset.open === "true") ? closeAll() : openOne(dd);
    });
  });

  document.addEventListener('click', (e) => {
    if (!e.target.closest('.nav-dd')) closeAll();
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeAll();
  });

  // Active state (by pathname)
  const path = (location.pathname.split('/').pop() || '').toLowerCase();

  // Reset active markers
  document.querySelectorAll('.nav [data-active]').forEach(a => a.removeAttribute('data-active'));
  document.querySelectorAll('.nav-dd').forEach(dd => dd.removeAttribute('data-active'));

  const pageToNav = new Map([
    ['media.html', 'media'],
    ['player.html', 'player'],
    ['api.html', 'api'],
    ['playlist.html', 'playlist'],
    ['grid.html', 'grid'],
    ['ad.html', 'csai'],
    ['ssai.html', 'ssai'],
    ['ga.html', 'ga'],
  ]);

  const key = pageToNav.get(path);
  if (!key) return;

  // Direct links
  const direct = document.querySelector(`.nav > a[data-nav="${key}"]`);
  if (direct) direct.dataset.active = "true";

  // Dropdown items + parent highlight
  const item = document.querySelector(`.nav-menu a[data-nav="${key}"]`);
  if (item) {
    item.dataset.active = "true";
    const group = item.closest('.nav-dd');
    if (group) group.dataset.active = "true";
  }
})();
</script>



</body>
</html>
