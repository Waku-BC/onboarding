<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <title>CSAI広告</title>
  <link href="https://players.brightcove.net/videojs-ima3/2/videojs.ima3.min.css" rel="stylesheet">
  <link href="https://solutions.brightcove.com/wmatsuo/scrollIntoViewAd.css" rel="stylesheet">
</head>

<body>

 <link href="https://players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet">

  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent iaculis est et libero ultricies condimentum. Suspendisse ut ante sed leo consequat cursus eget a ex. Etiam aliquet augue sed elit aliquet iaculis. Nunc iaculis ultrices congue. Pellentesque at enim sapien. Donec nec semper sem. Aenean dui quam, euismod vel commodo nec, cursus tempor risus. Donec ligula mi, imperdiet quis lorem id, blandit semper dolor. Duis accumsan tempor malesuada.</p>
  <p>Duis ullamcorper varius vulputate. Mauris et purus neque. Duis at erat vulputate purus mattis blandit ac id erat. Nullam tempor metus in lorem aliquam gravida. Nullam id eros condimentum dui maximus posuere non et neque. Fusce dapibus neque finibus nunc accumsan lobortis.</p>
  <p>Curabitur scelerisque mi a ante euismod congue. Suspendisse rhoncus, odio non faucibus cursus, metus diam vestibulum velit, eu commodo nunc orci et purus. Sed eget ultrices sem. Nullam egestas ipsum augue, eu condimentum ipsum bibendum ac. Phasellus varius orci eget est aliquam posuere. Nam ornare at felis ut fermentum. Suspendisse auctor ultricies augue vitae dapibus. Nam efficitur urna velit, quis interdum augue vestibulum et. Pellentesque aliquam, massa et condimentum viverra, lacus est mattis ipsum, nec facilisis eros tortor quis justo.</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent iaculis est et libero ultricies condimentum. Suspendisse ut ante sed leo consequat cursus eget a ex. Etiam aliquet augue sed elit aliquet iaculis. Nunc iaculis ultrices congue. Pellentesque at enim sapien. Donec nec semper sem. Aenean dui quam, euismod vel commodo nec, cursus tempor risus. Donec ligula mi, imperdiet quis lorem id, blandit semper dolor. Duis accumsan tempor malesuada.</p>

  <video-js id="myPlayerID"
    data-video-id="1740566638273424488"
    data-account="6243204265001"
    data-player="IZlQixb5M"
    data-embed="default"
    data-application-id
    controls
    muted></video-js>


  <p>Duis ullamcorper varius vulputate. Mauris et purus neque. Duis at erat vulputate purus mattis blandit ac id erat. Nullam tempor metus in lorem aliquam gravida. Nullam id eros condimentum dui maximus posuere non et neque. Fusce dapibus neque finibus nunc accumsan lobortis.</p>
  <p>Curabitur scelerisque mi a ante euismod congue. Suspendisse rhoncus, odio non faucibus cursus, metus diam vestibulum velit, eu commodo nunc orci et purus. Sed eget ultrices sem. Nullam egestas ipsum augue, eu condimentum ipsum bibendum ac. Phasellus varius orci eget est aliquam posuere. Nam ornare at felis ut fermentum. Suspendisse auctor ultricies augue vitae dapibus. Nam efficitur urna velit, quis interdum augue vestibulum et. Pellentesque aliquam, massa et condimentum viverra, lacus est mattis ipsum, nec facilisis eros tortor quis justo.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent iaculis est et libero ultricies condimentum. Suspendisse ut ante sed leo consequat cursus eget a ex. Etiam aliquet augue sed elit aliquet iaculis. Nunc iaculis ultrices congue. Pellentesque at enim sapien. Donec nec semper sem. Aenean dui quam, euismod vel commodo nec, cursus tempor risus. Donec ligula mi, imperdiet quis lorem id, blandit semper dolor. Duis accumsan tempor malesuada.</p>
  <p>Duis ullamcorper varius vulputate. Mauris et purus neque. Duis at erat vulputate purus mattis blandit ac id erat. Nullam tempor metus in lorem aliquam gravida. Nullam id eros condimentum dui maximus posuere non et neque. Fusce dapibus neque finibus nunc accumsan lobortis.</p>
  <p>Curabitur scelerisque mi a ante euismod congue. Suspendisse rhoncus, odio non faucibus cursus, metus diam vestibulum velit, eu commodo nunc orci et purus. Sed eget ultrices sem. Nullam egestas ipsum augue, eu condimentum ipsum bibendum ac. Phasellus varius orci eget est aliquam posuere. Nam ornare at felis ut fermentum. Suspendisse auctor ultricies augue vitae dapibus. Nam efficitur urna velit, quis interdum augue vestibulum et. Pellentesque aliquam, massa et condimentum viverra, lacus est mattis ipsum, nec facilisis eros tortor quis justo.</p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent iaculis est et libero ultricies condimentum. Suspendisse ut ante sed leo consequat cursus eget a ex. Etiam aliquet augue sed elit aliquet iaculis. Nunc iaculis ultrices congue. Pellentesque at enim sapien. Donec nec semper sem. Aenean dui quam, euismod vel commodo nec, cursus tempor risus. Donec ligula mi, imperdiet quis lorem id, blandit semper dolor. Duis accumsan tempor malesuada.</p>
  <p>Duis ullamcorper varius vulputate. Mauris et purus neque. Duis at erat vulputate purus mattis blandit ac id erat. Nullam tempor metus in lorem aliquam gravida. Nullam id eros condimentum dui maximus posuere non et neque. Fusce dapibus neque finibus nunc accumsan lobortis.</p>
  <p>Curabitur scelerisque mi a ante euismod congue. Suspendisse rhoncus, odio non faucibus cursus, metus diam vestibulum velit, eu commodo nunc orci et purus. Sed eget ultrices sem. Nullam egestas ipsum augue, eu condimentum ipsum bibendum ac. Phasellus varius orci eget est aliquam posuere. Nam ornare at felis ut fermentum. Suspendisse auctor ultricies augue vitae dapibus. Nam efficitur urna velit, quis interdum augue vestibulum et. Pellentesque aliquam, massa et condimentum viverra, lacus est mattis ipsum, nec facilisis eros tortor quis justo.</p>

<script src="https://players.brightcove.net/6243204265001/IZlQixb5M_default/index.min.js"></script>
  <script src="https://players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  
  <style>
.video-js {
  width: 480px;
  height: 270px;
}
</style>

<script>
videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this,
      isAdPlaying = false;

  // +++ Configure IMA3 plugin +++
  myPlayer.ima3({
    // only use HTML5 mode
    adTechOrder: ["html5"],
    // you can increase or decrease the max amount of time to wait for an ad
    timeout: 5000,
    // this is where your ad tag goes
    serverUrl:
      "https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&sz=640x480&cust_params=sample_ct%3Dlinear&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator="
  });

  // +++ Execute every time page is scrolled +++
  window.onscroll = checkIfVideoInView;

  // +++ Called on scroll, check if in view and the play/pause +++
  function checkIfVideoInView() {
    // check if we are in ad or content playback
    //  and get reference to the relevant player
    var currentPlayer = !isAdPlaying ? myPlayer : myPlayer.ima3.adPlayer;
    if (isScrolledIntoView(myPlayer.el())) {
      // the player is fully in the viewport
      currentPlayer.play();
      // ensure the conent player is paused
      if (isAdPlaying) {
        myPlayer.pause();
      }
    } else {
      // the player is not in the viewport
      currentPlayer.pause();
    }
  }

  // +++ Checks if player is in view +++
  function isScrolledIntoView(elem) {
    // Get the position of the viewport
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    // get the position of the player element
    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    // Determine if the player element is in fully in the viewport
    return (
      elemBottom >= docViewTop &&
      elemTop <= docViewBottom &&
      elemBottom <= docViewBottom &&
      elemTop >= docViewTop
    );
  }

  // +++ Set Boolean value for if ad is playing +++
  myPlayer.on(
    [
      "ads-ad-started",
      "ads-ad-ended",
      "ima3-complete",
      "ads-ad-skipped",
      "adserror",
      "ads-allpods-completed"
    ],
    function(evtObject) {
      if (evtObject.type == "ads-ad-started") {
        isAdPlaying = true;
      } else {
        isAdPlaying = false;
      }
    }
  );
});
</script>

</body>

</html>
