<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catalog Playlist — Grid + Modal</title>

  <style>
    :root{
      --black:#000;
      --white:#fff;
      --yellow:#EFD900;
      --orange:#F76531;
      --purple:#AA6C7E;
      --blue:#4EA9D1;

      --fg: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.64);
      --border: rgba(255,255,255,.12);

      --max: 1160px;
      --h: 72px;

      --shadow: 0 12px 34px rgba(0,0,0,.35);
      --shadow-soft: 0 8px 22px rgba(0,0,0,.22);

      --ease: cubic-bezier(.2,.8,.2,1);
      --focus: 0 0 0 3px rgba(78,169,209,.35);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Apple Color Emoji","Segoe UI Emoji";
      color: var(--fg);
      background: var(--black);
      overflow-x:hidden;
    }
    a{ color:inherit; text-decoration:none; }
    button{ font:inherit; }

    .container{
      width:min(var(--max), calc(100% - 32px));
      margin:0 auto;
    }

    /* ===== Header (same as LP) ===== */
    .header{
      position:sticky; top:0; z-index:50;
      height:var(--h);
      display:flex; align-items:center;
      background: linear-gradient(to bottom, rgba(0,0,0,.78), rgba(0,0,0,.35));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.08);
      transition: background .25s var(--ease), box-shadow .25s var(--ease), border-color .25s var(--ease);
    }
    .header.is-scrolled{
      background: rgba(0,0,0,.84);
      box-shadow: var(--shadow-soft);
      border-bottom-color: rgba(255,255,255,.12);
    }
    .header-inner{
      width:min(var(--max), calc(100% - 32px));
      margin:0 auto;
      display:flex; align-items:center; justify-content:space-between;
      gap:14px;
    }
    .brand{ display:flex; align-items:center; gap:12px; min-width: 240px; }
    .logo-img{ width:34px; height:34px; object-fit:contain; display:block; }
    .brand-name{ display:flex; flex-direction:column; line-height:1.08; }
    .brand-name strong{ font-weight:800; letter-spacing:.6px; }
    .brand-name span{ font-size:12px; color: var(--muted); }

    .nav{
      display:flex; align-items:center; gap:2px;
      padding:6px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.25);
    }
    .nav a{
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 14px;
      color: rgba(255,255,255,.78);
      transition: background .18s var(--ease), color .18s var(--ease), transform .18s var(--ease);
      position:relative;
      outline:none;
      white-space:nowrap;
    }
    .nav a:hover{ background: rgba(255,255,255,.08); color: rgba(255,255,255,.92); transform: translateY(-1px); }
    .nav a:focus-visible{ box-shadow: var(--focus); }
    .nav a[data-active="true"]{
      color: rgba(255,255,255,.95);
      background: rgba(255,255,255,.10);
    }
    .nav a[data-active="true"]::after{
      content:"";
      position:absolute;
      left:16px; right:16px; bottom:6px;
      height:2px; border-radius:999px;
      background: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
      opacity:.95;
    }

    @media (max-width: 980px){
      .nav{ display:none; }
    }

    /* ===== Page ===== */
    .page{
      padding: 18px 0 64px;
      background:
        radial-gradient(1100px 620px at 10% -20%, rgba(239,217,0,.10), transparent 60%),
        radial-gradient(900px 520px at 90% -10%, rgba(78,169,209,.08), transparent 55%),
        var(--black);
    }

    .topbar{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 14px;
      padding: 16px 0 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .topbar h1{
      margin:0;
      font-size: clamp(18px, 2.1vw, 26px);
      letter-spacing:-.2px;
    }
    .topbar p{
      margin:8px 0 0;
      color: rgba(255,255,255,.70);
      font-size: 13px;
      line-height:1.65;
      max-width: 90ch;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.72);
      font-size: 12px;
      white-space:nowrap;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
    }

    /* ===== Grid ===== */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      padding-top: 16px;
    }
    .tile{
      grid-column: span 3;
      appearance:none;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.34);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 20px;
      overflow:hidden;
      cursor:pointer;
      text-align:left;
      box-shadow: var(--shadow-soft);
      transition: transform .18s var(--ease), background .18s var(--ease), border-color .18s var(--ease);
      outline:none;
      padding:0;
      display:flex;
      flex-direction:column;
      min-height: 240px;
    }
    .tile:hover{
      transform: translateY(-3px);
      background: rgba(0,0,0,.40);
      border-color: rgba(255,255,255,.18);
    }
    .tile:focus-visible{ box-shadow: var(--shadow), var(--focus); }

    @media (max-width: 980px){ .tile{ grid-column: span 4; } }
    @media (max-width: 720px){ .tile{ grid-column: span 6; } }
    @media (max-width: 520px){ .tile{ grid-column: span 12; } }

    .thumbwrap{
      position:relative;
      aspect-ratio:16/9;
      background: rgba(255,255,255,.06);
      overflow:hidden;
    }
    .thumb{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.01);
      filter: saturate(1.02) contrast(1.02);
    }
    .thumbwrap::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(to top, rgba(0,0,0,.72), rgba(0,0,0,.05) 55%, rgba(0,0,0,.00));
      pointer-events:none;
    }
    .duration{
      position:absolute;
      right:10px; bottom:10px;
      z-index:2;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: rgba(255,255,255,.90);
      font-size: 12px;
      letter-spacing:.02em;
    }
    .play{
      position:absolute;
      left:10px; bottom:10px;
      width: 42px; height: 42px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      display:grid;
      place-items:center;
      z-index:2;
    }

    .meta{
      padding: 12px 14px 14px;
      display:flex;
      flex-direction:column;
      gap: 8px;
      flex:1;
    }
    .title{
      font-size: 14px;
      line-height:1.35;
      font-weight: 800;
      letter-spacing:.1px;
      color: rgba(255,255,255,.92);
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }
    .date{
      font-size: 11px;
      color: rgba(255,255,255,.55);
      letter-spacing:.06em;
    }
    .desc{
      font-size: 13px;
      color: rgba(255,255,255,.70);
      line-height:1.55;
      display:-webkit-box;
      -webkit-line-clamp:2;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .tags{
      margin-top:auto;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      padding-top: 6px;
    }
    .tag{
      padding: 6px 10px;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 999px;
      font-size: 12px;
      color: rgba(255,255,255,.72);
      background: rgba(0,0,0,.22);
      white-space:nowrap;
    }

    /* ===== Modal ===== */
    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:9999;
    }
    .modal-backdrop[aria-hidden="false"]{ display:flex; }

    .modal{
      width:min(1080px, 100%);
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 16px 52px rgba(0,0,0,.55);
      position:relative;
    }

    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(900px 200px at 20% 20%, rgba(239,217,0,.10), transparent 60%),
        radial-gradient(900px 220px at 90% 0%, rgba(78,169,209,.10), transparent 60%),
        rgba(0,0,0,.35);
    }
    .modal-title{
      margin:0;
      font-size: 13px;
      font-weight: 800;
      color: rgba(255,255,255,.92);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .close{
      appearance:none;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      border-radius: 999px;
      padding:8px 12px;
      cursor:pointer;
      font-size: 12px;
      transition: transform .18s var(--ease), background .18s var(--ease), border-color .18s var(--ease);
      outline:none;
    }
    .close:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.22);
    }
    .close:focus-visible{ box-shadow: var(--focus); }

    .modal-body{ background:#000; }

    /* Keep 16:9 inside modal */
    .player-wrap{ width:100%; }

    @media (max-width:480px){
      .close{ padding:10px 14px; }
    }

/* ===== Shared Header/Nav Dropdown (overlay) ===== */
:root{
  --brand-grad: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
}

.nav{ position:relative; }
.nav-dd{ position:relative; display:inline-flex; align-items:center; }

.nav-dd-btn{
  appearance:none;
  border:0;
  background:transparent;
  cursor:pointer;
  padding:10px 12px;
  border-radius:999px;
  font-size:14px;
  color:rgba(255,255,255,.78);
  transition:background .18s var(--ease), color .18s var(--ease), transform .18s var(--ease);
  position:relative;
  outline:none;
  white-space:nowrap;
  display:inline-flex;
  align-items:center;
  gap:10px;
}

.nav-dd-btn:hover{
  background:rgba(255,255,255,.08);
  color:rgba(255,255,255,.92);
  transform:translateY(-1px);
}
.nav-dd-btn:focus-visible{ box-shadow:var(--focus); }

.nav a:hover::after,
.nav-dd-btn:hover::after{
  content:"";
  position:absolute;
  left:16px; right:16px; bottom:6px;
  height:2px; border-radius:999px;
  background:var(--brand-grad);
  opacity:.95;
}

.nav-dd[data-open="true"] .nav-dd-btn,
.nav-dd[data-active="true"] .nav-dd-btn{
  color:rgba(255,255,255,.95);
  background:rgba(255,255,255,.10);
}
.nav-dd[data-open="true"] .nav-dd-btn::after,
.nav-dd[data-active="true"] .nav-dd-btn::after{
  content:"";
  position:absolute;
  left:16px; right:16px; bottom:6px;
  height:2px; border-radius:999px;
  background:var(--brand-grad);
  opacity:.95;
}

.chev{
  width:10px; height:10px;
  display:inline-block;
  border-right:2px solid rgba(255,255,255,.55);
  border-bottom:2px solid rgba(255,255,255,.55);
  transform:rotate(45deg);
  transition:transform .18s var(--ease), opacity .18s var(--ease);
  opacity:.9;
}
.nav-dd[data-open="true"] .chev{ transform:rotate(225deg); }

.nav-menu{
  position:absolute;
  top:calc(100% + 10px);
  left:0;
  min-width:220px;
  padding:8px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.72);
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  box-shadow:0 14px 40px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,.06) inset;
  display:none;
  z-index:80;
}
.nav-dd[data-open="true"] .nav-menu{ display:block; }

.nav-menu a{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 10px;
  border-radius:12px;
  color:rgba(255,255,255,.86);
  border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.04);
  transition:transform .18s var(--ease), background .18s var(--ease), border-color .18s var(--ease), box-shadow .18s var(--ease);
  white-space:nowrap;
  position:relative;
}
.nav-menu a:hover{
  transform:translateY(-1px);
  background:
    linear-gradient(rgba(255,255,255,.06), rgba(255,255,255,.06)) padding-box,
    var(--brand-grad) border-box;
  border:1px solid transparent;
  box-shadow:0 8px 22px rgba(0,0,0,.35), 0 0 18px rgba(247,101,49,.18);
}
.nav-menu a[data-active="true"]{
  background:
    linear-gradient(rgba(255,255,255,.08), rgba(255,255,255,.08)) padding-box,
    var(--brand-grad) border-box;
  border:1px solid transparent;
}
.nav-menu a[data-active="true"]::after{
  content:"";
  position:absolute;
  left:12px; right:12px; bottom:7px;
  height:2px; border-radius:999px;
  background:var(--brand-grad);
  opacity:.95;
}

@media (max-width:760px){
  .nav{ flex-wrap:wrap; justify-content:center; }
  .nav-menu{ left:50%; transform:translateX(-50%); }
}

/* ===== Footer ===== */
.footer{
  position:relative;
  border-top: 1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(900px 420px at 15% 120%, rgba(239,217,0,.10), transparent 60%),
    radial-gradient(860px 420px at 85% 120%, rgba(78,169,209,.10), transparent 60%),
    linear-gradient(to top, rgba(255,255,255,.03), rgba(0,0,0,0) 45%),
    var(--black);
  overflow:hidden;
}

/* top accent line */
.footer::before{
  content:"";
  position:absolute;
  left:0; right:0; top:0;
  height:1px;
  background: linear-gradient(90deg, var(--yellow), var(--orange), var(--purple), var(--blue));
  opacity:.9;
}

/* subtle noise-ish sheen */
.footer::after{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(900px 520px at 50% 130%, rgba(255,255,255,.05), transparent 60%);
  pointer-events:none;
  opacity:.6;
}

.footer-inner{
  position:relative;
  z-index:1;
  padding: 40px 0 22px;
}

.footer-top{
  display:grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 18px;
  align-items:start;
}

.footer-brand{
  display:flex;
  align-items:flex-start;
  gap:14px;
  text-align:left;
}

.footer-logo{
  width:34px;
  height:34px;
  object-fit:contain;
  flex:0 0 auto;
  opacity:.92;
}

.footer-brand h3{
  margin:0 0 4px 0;
  font-size:15px;
  font-weight:600;
  letter-spacing:.2px;
}

.footer-brand p{
  margin:0;
  font-size:13px;
  line-height:1.5;
  color:rgba(255,255,255,.65);
}

.footer-col h4{
  margin: 0 0 10px;
  font-size: 12px;
  letter-spacing:.35px;
  text-transform: uppercase;
  color: rgba(255,255,255,.78);
}

.footer-links{
  display:grid;
  grid-auto-flow: column;
  grid-template-rows: repeat(3, auto);
  gap: 8px 14px;
  align-content:start;
}

@media (max-width: 640px){
  .footer-links{
    grid-auto-flow: row;
    grid-template-rows: none;
  }
}

.footer-links a{
  color: rgba(255,255,255,.70);
  font-size: 13px;
  line-height:1.4;
  display:inline-flex;
  align-items:center;
  gap: 8px;
  width: fit-content;
  padding: 6px 8px;
  border-radius: 10px;
  transition: background .18s var(--ease), color .18s var(--ease), transform .18s var(--ease);
  outline:none;
}

.footer-links a:hover{
  color: rgba(255,255,255,.92);
  background: rgba(255,255,255,.06);
  transform: translateY(-1px);
}

.footer-links a:focus-visible{ box-shadow: var(--focus); }

.footer-links .hint{
  opacity:.75;
  font-size: 12px;
}

.footer-divider{
  margin: 22px 0 14px;
  height:1px;
  background: rgba(255,255,255,.10);
}

.footer-bottom{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  flex-wrap:wrap;
  color: rgba(255,255,255,.55);
  font-size: 12px;
}

.footer-badges{
  display:flex;
  align-items:center;
  gap: 8px;
  flex-wrap:wrap;
}

.footer-pill{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.70);
}

/* responsive */
@media (max-width: 980px){
  .footer-top{ grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px){
  .footer-inner{ padding: 34px 0 20px; }
  .footer-top{ grid-template-columns: 1fr; }
  .footer-bottom{ flex-direction:column; align-items:flex-start; }
}

/* Footer legacy reset (avoid page-specific layout collisions) */
.footer .footer-inner{ display:block; }

</style>
</head>

<body>
  <header class="header" id="siteHeader">
    <div class="header-inner">
      <a class="brand" href="index.html">
        <img class="logo-img" src="https://solutions.brightcove.com/wmatsuo/Blogo.svg" alt="Brightcove Logo" />
        <div class="brand-name">
          <strong>BRIGHTCOVE</strong>
          <span>Onboarding Engagement Manager</span>
          <span>Implementation Gallery</span>
        </div>
      </a>
  
      <nav class="nav" aria-label="Primary">
        <a href="index.html" data-nav="home">Home</a>
        <a href="media.html" data-nav="media">Media</a>
        <a href="player.html" data-nav="player">Player</a>

        <div class="nav-dd" data-nav-group="catalog">
          <button class="nav-dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Catalog <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="nav-menu" role="menu" aria-label="Catalog menu">
            <a role="menuitem" href="api.html" data-nav="api">Catalog API</a>
            <a role="menuitem" href="playlist.html" data-nav="playlist">Playlist</a>
            <a role="menuitem" href="grid.html" data-nav="grid">Grid</a>
          </div>
        </div>

        <div class="nav-dd" data-nav-group="advertising">
          <button class="nav-dd-btn" type="button" aria-haspopup="menu" aria-expanded="false">
            Advertising <span class="chev" aria-hidden="true"></span>
          </button>
          <div class="nav-menu" role="menu" aria-label="Advertising menu">
            <a role="menuitem" href="ad.html" data-nav="csai">CSAI</a>
            <a role="menuitem" href="ssai.html" data-nav="ssai">SSAI</a>
          </div>
        </div>

        <a href="ga4_gallery.html" data-nav="ga">Google Analytics</a>
      </nav>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <div class="topbar">
        <div>
          <div class="pill"><span class="dot"></span> Catalog Playlist</div>
          <h1 style="margin-top:8px;">Grid + Modal Player</h1>
          <p>Videos are fetched via the Catalog API and displayed as a grid. Click a tile to play in a modal.</p>
        </div>
        <div class="pill" id="countPill">—</div>
      </div>

      <div id="grid" class="grid" aria-label="Playlist grid"></div>
    </div>
  </main>

  <!-- ===== Modal ===== -->
  <div id="backdrop" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Video player modal">
    <div class="modal" role="document">
      <div class="modal-head">
        <p id="modalTitle" class="modal-title"></p>
        <button id="closeBtn" class="close" type="button" aria-label="Close">Close</button>
      </div>
      <div class="modal-body">
        <div class="player-wrap">
          <!-- Brightcove Player (same as previous page) -->
          <video-js
            id="bcPlayer"
            data-account="6243204265001"
            data-player="69IXNadf9"
            data-embed="default"
            controls
            playsinline
            class="vjs-fluid vjs-16-9">
          </video-js>
        </div>
      </div>
    </div>
  </div>

  <!-- Brightcove runtime (same as previous page) -->
  <script src="https://players.brightcove.net/6243204265001/69IXNadf9_default/index.min.js"></script>

  <script>
  (function(){
    // ====== Use the same IDs as the previous page ======
    const PLAYLIST_ID = "1849995119852741477"; // ← 前回のplaylist idに置換
    // ================================================

    // Header elevation
    const header = document.getElementById('siteHeader');
    const onScroll = () => header.classList.toggle('is-scrolled', window.scrollY > 6);
    onScroll();
    window.addEventListener('scroll', onScroll, { passive: true });

    const player = videojs("bcPlayer");
    const $grid = document.getElementById("grid");
    const $count = document.getElementById("countPill");

    const $backdrop = document.getElementById("backdrop");
    const $closeBtn = document.getElementById("closeBtn");
    const $modalTitle = document.getElementById("modalTitle");

    let items = [];
    let lastFocusEl = null;

    player.ready(function(){
      if(!PLAYLIST_ID || PLAYLIST_ID.includes("YOUR_")){
        $grid.innerHTML = "<div style='padding:10px;color:rgba(255,255,255,.65);font-size:13px;'>Set <code>PLAYLIST_ID</code> to a valid Brightcove playlist id.</div>";
        return;
      }

      player.catalog.getPlaylist(PLAYLIST_ID, function(err, playlist){
        if(err){
          console.error("getPlaylist error:", err);
          $grid.innerHTML = "<div style='padding:10px;color:#ff8a8a;font-size:13px;'>Failed to load playlist. Check console.</div>";
          return;
        }
        items = (playlist && playlist.videos) ? playlist.videos : (Array.isArray(playlist) ? playlist : []);
        $count.textContent = items.length ? (items.length + " items") : "—";
        renderGrid(items);
      });
    });

    function openModal(videoObj){
      lastFocusEl = document.activeElement;

      $modalTitle.textContent = videoObj.name || "";
      $backdrop.setAttribute("aria-hidden", "false");

      // Load & try to play (autoplay may be blocked; ignore)
      player.catalog.load(videoObj);
      const p = player.play();
      if(p && typeof p.catch === "function"){ p.catch(() => {}); }

      $closeBtn.focus();
      document.body.style.overflow = "hidden";
    }

    function closeModal(){
      $backdrop.setAttribute("aria-hidden", "true");

      try{
        player.pause();
        if (typeof player.currentTime === "function") player.currentTime(0);
      }catch(e){}

      document.body.style.overflow = "";

      if(lastFocusEl && typeof lastFocusEl.focus === "function"){
        lastFocusEl.focus();
      }
    }

    $closeBtn.addEventListener("click", closeModal);

    // backdrop click
    $backdrop.addEventListener("click", (e) => {
      if(e.target === $backdrop) closeModal();
    });

    // ESC close
    window.addEventListener("keydown", (e) => {
      if(e.key === "Escape" && $backdrop.getAttribute("aria-hidden") === "false"){
        closeModal();
      }
    });

    function renderGrid(videos){
      $grid.innerHTML = "";
      videos.forEach(v => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "tile";
        btn.setAttribute("aria-label", v.name ? ("Play " + v.name) : "Play");

        btn.addEventListener("click", () => openModal(v));

        const wrap = document.createElement("div");
        wrap.className = "thumbwrap";

        const img = document.createElement("img");
        img.className = "thumb";
        img.loading = "lazy";
        img.alt = v.name || "thumbnail";
        img.src = (v.poster || v.thumbnail) ? (v.poster || v.thumbnail) : "";

        const play = document.createElement("div");
        play.className = "play";
        play.innerHTML = `
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10 8l6 4-6 4V8Z" stroke="rgba(255,255,255,.95)" stroke-width="2" stroke-linejoin="round"/>
          </svg>`;

        const dur = document.createElement("div");
        dur.className = "duration";
        dur.textContent = formatDuration(v.duration);

        wrap.appendChild(img);
        wrap.appendChild(play);
        if(dur.textContent) wrap.appendChild(dur);

        const meta = document.createElement("div");
        meta.className = "meta";

        const title = document.createElement("div");
        title.className = "title";
        title.textContent = v.name || "";

        const date = document.createElement("div");
        date.className = "date";
        date.textContent = formatDate(v.published_at || v.updated_at || v.created_at);

        const desc = document.createElement("div");
        desc.className = "desc";
        desc.textContent = v.description || v.long_description || v.short_description || "";

        meta.appendChild(title);
        meta.appendChild(date);
        if(desc.textContent) meta.appendChild(desc);

        // Optional: top tags preview (first 2)
        const tags = Array.isArray(v.tags) ? v.tags.slice(0,2) : [];
        if(tags.length){
          const tagWrap = document.createElement("div");
          tagWrap.className = "tags";
          tags.forEach(t => {
            const s = document.createElement("span");
            s.className = "tag";
            s.textContent = t;
            tagWrap.appendChild(s);
          });
          meta.appendChild(tagWrap);
        }

        btn.appendChild(wrap);
        btn.appendChild(meta);
        $grid.appendChild(btn);
      });
    }

    function formatDate(iso){
      if(!iso) return "";
      const d = new Date(iso);
      if(isNaN(d)) return "";
      return d.toLocaleDateString(undefined, { year:"numeric", month:"short", day:"2-digit" }).toUpperCase();
    }

    // Brightcove duration often ms; sometimes seconds depending on context
    function formatDuration(duration){
      if(duration == null) return "";
      let ms = Number(duration);
      if(!isFinite(ms) || ms <= 0) return "";

      // If it looks like seconds, convert to ms
      if(ms < 1000 * 20) ms = ms * 1000;

      const totalSec = Math.floor(ms / 1000);
      const h = Math.floor(totalSec / 3600);
      const m = Math.floor((totalSec % 3600) / 60);
      const s = totalSec % 60;

      const mm = String(m).padStart(h ? 2 : 1, "0");
      const ss = String(s).padStart(2, "0");
      return h ? `${h}:${mm}:${ss}` : `${m}:${ss}`;
    }
  })();
  </script>
<footer class="footer" aria-label="Site footer">
  <div class="container footer-inner">
    <div class="footer-top">
      <div class="footer-brand">
        <img class="footer-logo" src="https://solutions.brightcove.com/wmatsuo/Blogo.svg" alt="" aria-hidden="true">
        <div>
          <h3>Onboarding Engagement Manager</h3>
          <p>
            A lightweight Brightcove onboarding/demo gallery—player patterns, catalog surfaces, and advertising inspectors.
          </p>
        </div>
      </div>

      <div class="footer-col">
        <h4>Explore</h4>
        <nav class="footer-links" aria-label="Footer navigation">
          <a href="index.html"><span aria-hidden="true">↗</span> Home</a>
          <a href="media.html"><span aria-hidden="true">↗</span> Media</a>
          <a href="player.html"><span aria-hidden="true">↗</span> Player showcase</a>
          <a href="api.html"><span aria-hidden="true">↗</span> Catalog API</a>
          <a href="playlist.html"><span aria-hidden="true">↗</span> Playlist</a>
          <a href="grid.html"><span aria-hidden="true">↗</span> Grid</a>
          <a href="ad.html"><span aria-hidden="true">↗</span> Advertising (CSAI)</a>
          <a href="ssai.html"><span aria-hidden="true">↗</span> Advertising (SSAI)</a>
          <a href="ga4_gallery.html"><span aria-hidden="true">↗</span> Google Analytics</a>
        </nav>
      </div>
    </div>

    <div class="footer-divider" role="separator"></div>

    <div class="footer-bottom">
      <div>© <span id="footerYear"></span> Brightcove • Waku Matsuo</div>

      <div class="footer-badges" aria-label="Badges">
        <span class="footer-pill">Docs-aligned</span>
        <span class="footer-pill">Implementation-first</span>
        <span class="footer-pill">Brightcove Player</span>
      </div>
    </div>
  </div>
</footer>
<script>
(() => {
  // Header elevation
  const header = document.getElementById('siteHeader');
  if (header) {
    const onScroll = () => header.classList.toggle('is-scrolled', window.scrollY > 6);
    onScroll();
    window.addEventListener('scroll', onScroll, { passive: true });
  }

  // Dropdown open/close
  const dds = Array.from(document.querySelectorAll('.nav-dd'));
  const closeAll = () => dds.forEach(dd => {
    dd.dataset.open = "false";
    const btn = dd.querySelector('.nav-dd-btn');
    if (btn) btn.setAttribute('aria-expanded', 'false');
  });
  const openOne = (dd) => {
    closeAll();
    dd.dataset.open = "true";
    const btn = dd.querySelector('.nav-dd-btn');
    if (btn) btn.setAttribute('aria-expanded', 'true');
  };

  dds.forEach(dd => {
    const btn = dd.querySelector('.nav-dd-btn');
    if (!btn) return;
    dd.dataset.open = "false";
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      (dd.dataset.open === "true") ? closeAll() : openOne(dd);
    });
  });

  document.addEventListener('click', (e) => {
    if (!e.target.closest('.nav-dd')) closeAll();
  });
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeAll();
  });

  // Active state (by pathname)
  const path = (location.pathname.split('/').pop() || '').toLowerCase();

  // Reset active markers
  document.querySelectorAll('.nav [data-active]').forEach(a => a.removeAttribute('data-active'));
  document.querySelectorAll('.nav-dd').forEach(dd => dd.removeAttribute('data-active'));

  const pageToNav = new Map([
    ['index.html', 'home'],
    ['playershow.html', 'player'],
    ['ga4_gallery.html', 'ga'],
    ['catalog.html', 'api'],
    ['media.html', 'media'],
    ['player.html', 'player'],
    ['api.html', 'api'],
    ['playlist.html', 'playlist'],
    ['grid.html', 'grid'],
    ['ad.html', 'csai'],
    ['ssai.html', 'ssai'],
    ['ga.html', 'ga'],
  ]);

  const key = pageToNav.get(path);
  if (!key) return;

  // Direct links
  const direct = document.querySelector(`.nav > a[data-nav="${key}"]`);
  if (direct) direct.dataset.active = "true";

  // Dropdown items + parent highlight
  const item = document.querySelector(`.nav-menu a[data-nav="${key}"]`);
  if (item) {
    item.dataset.active = "true";
    const group = item.closest('.nav-dd');
    if (group) group.dataset.active = "true";
  }
})();
</script>
<script>
(() => {
  const y = document.getElementById('footerYear');
  if (y) y.textContent = String(new Date().getFullYear());
})();
</script>
</body>
</html>
